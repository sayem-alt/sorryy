<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>I'm Sorry Bou ‚ù§Ô∏è</title>
<style>
  :root{
    --bg:#fff5f7;
    --accent:#ff4d6d;
    --card:#ffffff;
    --radius:18px;
    --shadow:0 12px 30px rgba(0,0,0,.08);
    --fg:#301934;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:'Poppins',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,sans-serif;
    background:var(--bg);
    color:var(--fg);
    overflow-x:hidden;
    text-align:center;
  }
  header{
    min-height:80vh;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:32px 16px;position:relative;
  }
  h1{
    font-size:clamp(2.2rem,6vw,4rem);
    margin:0 0 1rem;font-weight:800;color:var(--accent);
    text-shadow:0 0 15px rgba(255,77,109,.4);
    white-space:nowrap;overflow:hidden;border-right:3px solid rgba(255,77,109,.6);
    animation:caret 1s steps(1) infinite;
  }
  @keyframes caret{50%{border-color:transparent}}
  p.lead{
    max-width:780px;margin:0 auto 1.25rem;font-size:1.15rem;color:#444;animation:fadeIn 1.2s ease both 0.3s;
    line-height:1.6;
  }
  @keyframes fadeIn{
    from{opacity:0;transform:translateY(12px)}
    to{opacity:1;transform:translateY(0)}
  }
  main{max-width:820px;margin:0 auto;padding:0 16px 120px;}
  section{
    background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);
    padding:24px;margin:24px 0;animation:fadeIn 1s ease both;
    line-height:1.6;
  }
  .quote{
    font-style:italic;background:#ffe9ef;border-left:4px solid var(--accent);
    padding:14px 18px;border-radius:var(--radius);color:#8a2c3b;margin:20px 0;
  }
  .signature{
    font-family:"Brush Script MT","Segoe Script",cursive;font-size:2rem;color:var(--accent);margin-top:1.2rem;
  }
  .btn{
    background:var(--accent);color:#fff;border:none;border-radius:9999px;padding:14px 26px;cursor:pointer;
    font-size:1rem;box-shadow:var(--shadow);transition:transform .08s ease, box-shadow .2s;
  }
  .btn:active{transform:scale(.98)}
  .btn.outline{
    background:transparent;color:var(--accent);border:2px solid var(--accent);
  }
  .hearts{
    position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;z-index:-1;
  }
  .heart{
    position:absolute;color:rgba(255,77,109,.7);font-size:20px;animation:float 8s linear forwards;
  }
  @keyframes float{
    0%{transform:translateY(100vh) scale(0);}
    100%{transform:translateY(-10vh) scale(1);}
  }
  /* Modal */
  .modal{
    position:fixed;inset:0;background:rgba(0,0,0,.5);
    display:flex;align-items:center;justify-content:center;padding:16px;
    opacity:0;pointer-events:none;transition:opacity .2s;
  }
  .modal.show{opacity:1;pointer-events:auto;}
  .modal-content{
    background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);max-width:520px;width:100%;
    padding:24px;text-align:left;position:relative;animation:fadeIn .25s ease both;
  }
  .modal h3{margin-top:0;color:var(--accent);}
  .close{
    position:absolute;right:12px;top:8px;background:none;border:none;font-size:1.6rem;color:#999;cursor:pointer;
  }

  /* ===== Unique Forgive Meter ===== */
  .meter-wrap{
    margin-top:1.6rem;text-align:center;
  }
  .meter-track{
    position:relative;margin:1rem auto 0;width:100%;max-width:520px;height:18px;border-radius:9999px;
    background:#ffe3ea;box-shadow:inset 0 0 0 2px #ffd2dc;
    overflow:hidden;
  }
  .meter-fill{
    position:absolute;left:0;top:0;height:100%;width:0%;background:linear-gradient(90deg,#ff9ab1,#ff4d6d);
    transition:width .15s ease;
  }
  .meter-heart{
    position:absolute;top:50%;transform:translate(-50%,-50%);font-size:26px;transition:left .15s ease;
  }
  .meter-labels{
    display:flex;justify-content:space-between;font-size:.85rem;color:#888;max-width:520px;margin:6px auto 0;
  }
  .meter-percent{
    margin:.5rem 0 0;font-weight:600;color:var(--accent);
    transition:transform .2s;
  }
  .meter-percent.pop{transform:scale(1.15);}
  .unlock-message{
    opacity:0;transform:translateY(6px);transition:opacity .25s, transform .25s;
    font-weight:600;color:var(--accent);margin-top:.6rem;
  }
  .unlock-message.show{opacity:1;transform:translateY(0);}
  #iForgiveBtn{
    display:none;margin-top:.8rem;animation:pulse 1s infinite;
  }
  @keyframes pulse{
    0%{transform:scale(1)}
    50%{transform:scale(1.05)}
    100%{transform:scale(1)}
  }
  #confettiCanvas{
    position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;
  }
  iframe{
    position:fixed;bottom:-100%;left:-100%;width:1px;height:1px;opacity:0;
  }
</style>
</head>
<body>
  <canvas id="confettiCanvas"></canvas>

  <header>
    <h1 id="typing"></h1>
    <p class="lead">
      Bou, I don't want to give you just another ‚Äúsorry.‚Äù  
      I want to give you my heart, my truth, and my promise.  
      Every time I see your smile, I realize that my world begins and ends with you.  
      I hate that I made you feel hurt when all I want is to keep you safe and loved.  
      I‚Äôm not perfect, but for you, I‚Äôll fight my own flaws, my ego, and my mistakes.  
      I will keep choosing you, again and again, no matter what storms we face. <br>  
      ‚Äî Pr Pr Patapim
    </p>
    <div style="display:flex; gap:12px; margin-top:18px; flex-wrap:wrap; justify-content:center;">
      <button class="btn" id="playSongBtn">üéµ Play our song</button>
      <button class="btn outline" id="openModalBtn">üíå Reveal my heart</button>
    </div>
  </header>

  <main>
    <section>
      <p>Dear Bou,</p>
      <p>
        I am sorry for the moments when I let anger or carelessness overshadow my love for you.  
        I understand it hurt you, and it breaks me to know I was the reason for even a second of your sadness.  
        I promise to listen more, to love louder, and to treat your heart like the most precious thing I‚Äôll ever hold.
      </p>
      <div class="quote">‚ÄúYou are not just my love; you are my home, my peace, my reason.‚Äù</div>
      <p class="signature">‚Äî Pr Pr Patapim</p>
      <p style="margin-top:1.5rem; font-size:1.05rem; color:#444;">
        Bou, I promise I will never let anger or misconceptions hurt us again.  
        You are my safe place, and I will protect what we have with every breath.  
        I will never stop proving to you that I‚Äôm yours, completely and forever.
      </p>

      <!-- Unique Forgive Meter -->
      <div class="meter-wrap">
        <div class="meter-track" id="meterTrack">
          <div class="meter-fill" id="meterFill"></div>
          <div class="meter-heart" id="meterHeart">‚ù§Ô∏è</div>
        </div>
        <div class="meter-labels">
          <span>Hmm‚Ä¶</span>
          <span>Thinking‚Ä¶</span>
          <span>Maybe‚Ä¶</span>
          <span>Okay‚Ä¶</span>
          <span>Forgiven! üíñ</span>
        </div>
        <div class="meter-percent" id="meterPercent">0%</div>
        <div class="unlock-message" id="unlockMsg">Thank you‚Ä¶ I won't let you down again. ‚ù§Ô∏è</div>
        <button class="btn" id="iForgiveBtn">I Forgive You</button>
      </div>
    </section>
  </main>

  <!-- Your MP3 file -->
  <audio id="bgAudio" src="song.mp3" preload="auto" loop></audio>

  <!-- Background hearts -->
  <div class="hearts" id="hearts"></div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <button class="close" id="closeModal">&times;</button>
      <h3>From my heart to yours ‚ù§Ô∏è</h3>
      <ul>
        <li>You are the best part of my life.</li>
        <li>I hate that I made you cry. I'll do everything to never do it again.</li>
        <li>I promise to listen more, love louder, care deeper.</li>
        <li>Let me prove it with actions, not just words.</li>
      </ul>
      <p style="text-align:center;margin-top:1rem;">
        <button class="btn" id="modalConfettiBtn">Okay‚Ä¶ I believe you üíñ</button>
      </p>
    </div>
  </div>

<script>
  // Typing effect
  const text = "I'm Sorry Bou ‚ù§Ô∏è";
  let i = 0;
  function typing() {
    const el = document.getElementById("typing");
    if (i < text.length) {
      el.innerHTML += text.charAt(i);
      i++;
      setTimeout(typing, 120);
    } else {
      el.style.borderRight = 'none';
    }
  }
  typing();

  // Floating hearts
  const heartsEl = document.getElementById('hearts');
  function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.innerHTML = '‚ù§';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.fontSize = Math.random() * 20 + 15 + 'px';
    heart.style.animationDuration = Math.random() * 5 + 5 + 's';
    heartsEl.appendChild(heart);
    setTimeout(() => heart.remove(), 10000);
  }
  setInterval(createHeart, 300);

  // Modal & Confetti
  const modal = document.getElementById('modal');
  document.getElementById('openModalBtn').addEventListener('click', () => modal.classList.add('show'));
  document.getElementById('closeModal').addEventListener('click', () => modal.classList.remove('show'));
  document.getElementById('modal').addEventListener('click', (e) => {
    if(e.target === modal) modal.classList.remove('show');
  });

  const confettiCanvas = document.getElementById('confettiCanvas');
  const ctx = confettiCanvas.getContext('2d');
  let confettis = [];
  function resizeCanvas(){
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();
  function launchConfettiHearts(count=60){
    confettis = [];
    for(let i=0;i<count;i++){
      confettis.push({
        x: Math.random()*confettiCanvas.width,
        y: Math.random()*-50,
        size: 10 + Math.random()*20,
        speed: 2 + Math.random()*3,
        rot: Math.random()*360,
        rotSpeed: Math.random()*4 - 2
      });
    }
  }
  function drawConfetti(){
    ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
    ctx.font = "20px serif";
    confettis.forEach((c) => {
      ctx.save();
      ctx.translate(c.x, c.y);
      ctx.rotate(c.rot*Math.PI/180);
      ctx.fillStyle = 'rgba(255,77,109,.9)';
      ctx.fillText('‚ù§', -c.size/2, c.size/2);
      ctx.restore();
      c.y += c.speed;
      c.rot += c.rotSpeed;
    });
    requestAnimationFrame(drawConfetti);
  }
  drawConfetti();
  document.getElementById('modalConfettiBtn').addEventListener('click', ()=>{
    modal.classList.remove('show');
    launchConfettiHearts(120);
  });

  // Forgive Meter
  const track = document.getElementById('meterTrack');
  const fill  = document.getElementById('meterFill');
  const heart = document.getElementById('meterHeart');
  const percentEl = document.getElementById('meterPercent');
  const unlockMsg = document.getElementById('unlockMsg');
  const forgiveBtn = document.getElementById('iForgiveBtn');
  let meterVal = 0;
  const unlockAt = 90;

  function updateMeter(clientX){
    const rect = track.getBoundingClientRect();
    const x = Math.min(Math.max(clientX - rect.left, 0), rect.width);
    meterVal = Math.round((x / rect.width) * 100);
    fill.style.width = meterVal + '%';
    heart.style.left = meterVal + '%';
    percentEl.textContent = meterVal + '%';
    percentEl.classList.add('pop');
    setTimeout(()=>percentEl.classList.remove('pop'),120);

    if(meterVal >= unlockAt){
      unlockMsg.classList.add('show');
      forgiveBtn.style.display = 'inline-block';
    }
  }
  let dragging = false;
  track.addEventListener('mousedown', (e)=>{ dragging = true; updateMeter(e.clientX); });
  window.addEventListener('mousemove', (e)=>{ if(dragging) updateMeter(e.clientX); });
  window.addEventListener('mouseup', ()=> dragging = false);
  track.addEventListener('touchstart', (e)=>{ updateMeter(e.touches[0].clientX); });
  track.addEventListener('touchmove', (e)=>{ updateMeter(e.touches[0].clientX); });
  forgiveBtn.addEventListener('click', ()=>{
    launchConfettiHearts(200);
    unlockMsg.textContent = "Thank you‚Ä¶ I love you. ‚ù§Ô∏è";
  });

  // Music
  const playBtn = document.getElementById('playSongBtn');
  const bgAudio = document.getElementById('bgAudio');
  playBtn.addEventListener('click', async ()=>{
    try { await bgAudio.play(); }
    catch(err) { console.log("Music play blocked", err); }
  });
</script>
</body>
</html>